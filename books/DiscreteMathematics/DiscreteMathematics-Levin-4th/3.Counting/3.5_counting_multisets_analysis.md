# 3.5 Counting Multisets 분석

이 문서는 **3.5 Counting Multisets** 섹션의 내용을 분석하고 설명합니다. 이 섹션은 순서는 중요하지 않지만 **중복을 허용하는** 선택, 즉 **중복 조합(Multiset Counting)**을 다룹니다. 이는 "Stars and Bars(별과 칸막이)"라는 유명한 기법을 통해 해결됩니다.

## 1. 섹션 개요 (Overview)

지금까지 우리는 순열(순서 O, 중복 X)과 조합(순서 X, 중복 X)을 배웠습니다. 이제 제한 조건을 완화하여, 같은 원소를 여러 번 선택할 수 있는 경우를 살펴봅니다.
> "아이스크림 가게에 $n$가지 맛이 있을 때, 중복을 허용하여 $k$개의 스쿱을 고르는 방법은 몇 가지인가?"

이 문제는 **멀티셋(Multiset)**, 즉 중복된 원소를 포함할 수 있는 집합의 개수를 세는 문제입니다.

## 2. 멀티셋 (Multiset)이란?

* **정의:** 집합과 유사하지만, 원소의 중복을 허용하는 구조입니다. 순서는 고려하지 않습니다.
* **예시:** $\{a, a, b\}$는 $\{a, b\}$와 다르며, $\{a, b, a\}$와는 같습니다.
* **문제의 본질:** 서로 다른 $n$개의 종류 중에서 중복을 허용하여 $k$개를 선택하는 경우의 수입니다.

## 3. Stars and Bars (별과 칸막이) 기법

이 문제를 해결하는 가장 직관적인 방법은 **Stars and Bars** 모델입니다.

### 3.1 모델링 (쿠키 나눠주기 예시)

* **문제:** 3명의 아이($n=3$)에게 7개의 쿠키($k=7$)를 나눠주는 방법의 수는? (쿠키는 서로 구별되지 않음)
* **변환:** 쿠키를 별($*$)로, 아이들을 구분하는 경계를 칸막이($|$)로 표시합니다.
  * 예: `***|**|**` $\rightarrow$ 첫째 3개, 둘째 2개, 셋째 2개.
  * 예: `*******||` $\rightarrow$ 첫째 7개, 둘째 0개, 셋째 0개.
* **구조:**
  * 별($*$)의 개수: $k$개 (선택할 아이템 수)
  * 칸막이($|$)의 개수: $n-1$개 (종류를 구분하기 위해 필요한 벽의 수)
  * 총 자릿수: $k + (n-1)$

### 3.2 비트 문자열과의 연결

이것은 별($*$)을 1, 칸막이($|$)를 0으로 하는 비트 문자열 문제와 같습니다.

* 길이가 $n+k-1$인 문자열에서 $k$개의 1(별)을 선택하는 문제.
* 또는 $n-1$개의 0(칸막이)을 선택하는 문제.

## 4. 중복 조합 공식 (The Formula)

위의 모델링을 통해 공식을 유도할 수 있습니다.

$$ \left(\!\!{n \choose k}\!\!\right) = \binom{n+k-1}{k} = \binom{n+k-1}{n-1} $$

* **기호:** $\left(\!\!{n \choose k}\!\!\right)$는 "$n$ multichoose $k$"라고 읽습니다.
* **의미:** $n$개의 종류(bins)에 $k$개의 아이템(balls)을 분배하는 방법의 수.

## 5. 요약

**3.5 Counting Multisets**는 카운팅의 마지막 사분면을 채웁니다.

| | 순서 중요 (Order) | 순서 무관 (No Order) |
| :--- | :--- | :--- |
| **중복 X** | 순열 $P(n,k)$ | 조합 $\binom{n}{k}$ |
| **중복 O** | $n^k$ (곱의 법칙) | **중복 조합 $\binom{n+k-1}{k}$** |

이 섹션의 핵심은 복잡해 보이는 중복 선택 문제를 **"별과 칸막이를 나열하는 문제"**로 변환하여, 우리가 이미 알고 있는 조합 공식으로 해결하는 것입니다.
