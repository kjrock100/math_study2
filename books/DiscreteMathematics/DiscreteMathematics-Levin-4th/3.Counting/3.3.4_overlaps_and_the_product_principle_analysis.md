# 3.3.4 Overlaps and the Product Principle 분석

이 문서는 **3.3.4 Overlaps and the Product Principle** 섹션의 내용을 분석하고 설명합니다. 이 섹션은 앞서 배운 **포함-배제의 원리(PIE)**를 **곱의 법칙**이 적용되는 구조(비트 문자열, 순열 등)에 적용하여, 조건이 겹치는 복잡한 카운팅 문제를 해결하는 방법을 다룹니다.

## 1. 섹션 개요 (Overview)

단순한 집합의 원소를 세는 것을 넘어, 우리는 종종 "특정한 패턴을 가진 문자열"이나 "특정 조건을 만족하는 배열"의 개수를 세어야 합니다. 이때 여러 조건이 **"또는(OR)"**으로 연결되어 있다면, 각 조건에 해당하는 경우의 수를 곱의 법칙으로 계산한 뒤, PIE를 사용하여 중복을 제거해야 합니다.

## 2. 핵심 전략: 조건의 결합

문제가 "조건 A **또는** 조건 B를 만족하는 경우의 수"를 묻는다면, 전략은 다음과 같습니다.

1. **조건 A만 고려 ($|A|$):** 곱의 법칙을 사용하여 계산합니다. (보통 특정 위치를 고정하고 나머지를 자유롭게 둡니다.)
2. **조건 B만 고려 ($|B|$):** 마찬가지로 곱의 법칙을 사용하여 계산합니다.
3. **교집합 고려 ($|A \cap B|$):** 조건 A와 B를 **동시에(AND)** 만족하는 경우를 계산합니다. 이는 두 조건이 요구하는 모든 위치를 고정하는 것을 의미합니다.
4. **PIE 적용:** $|A \cup B| = |A| + |B| - |A \cap B|$

## 3. 주요 예시: 비트 문자열 (Bit Strings)

가장 대표적인 예제는 비트 문자열의 패턴 문제입니다.

* **문제:** 길이가 $n$인 비트 문자열 중, **'00'으로 시작하거나(Start with 00)** **'11'로 끝나는(End with 11)** 문자열의 개수는? ($n \ge 4$ 가정)

### 3.1 단계별 분석

1. **집합 A (Starts with 00):**
    * 첫 두 자리는 `00`으로 고정됩니다.
    * 나머지 $n-2$ 자리는 0 또는 1이 올 수 있습니다.
    * $|A| = 1 \cdot 1 \cdot 2^{n-2} = 2^{n-2}$

2. **집합 B (Ends with 11):**
    * 마지막 두 자리는 `11`로 고정됩니다.
    * 앞의 $n-2$ 자리는 자유롭습니다.
    * $|B| = 2^{n-2} \cdot 1 \cdot 1 = 2^{n-2}$

3. **교집합 $A \cap B$ (Starts with 00 AND Ends with 11):**
    * `00...11` 형태입니다.
    * 앞의 두 자리와 뒤의 두 자리가 모두 고정됩니다.
    * 중간의 $n-4$ 자리만 자유롭습니다.
    * $|A \cap B| = 2^{n-4}$

4. **최종 계산:**
    $$ |A \cup B| = 2^{n-2} + 2^{n-2} - 2^{n-4} $$

## 4. 요약

**3.3.4 Overlaps and the Product Principle**은 두 가지 강력한 도구의 시너지를 보여줍니다.

* **곱의 법칙**은 각 개별 조건($A$, $B$, $A \cap B$)의 크기를 계산하는 데 사용됩니다. (자유로운 위치의 수만큼 거듭제곱)
* **포함-배제의 원리**는 이렇게 계산된 값들을 올바르게 결합하여 중복을 제거하는 데 사용됩니다.
* 이 패턴은 "특정 문자로 시작하거나 끝나는 단어", "특정 숫자를 포함하거나 포함하지 않는 수열" 등 다양한 문제로 확장될 수 있습니다.
