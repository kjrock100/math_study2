# 2.3 까다로운 조합 예제 (Tricky Combinations Examples)

## 1. 개요 (Overview)

단순히 공식을 적용하는 것을 넘어, 논리적인 사고와 전략이 필요한 조합 문제들을 다룹니다. 주로 "적어도 하나(At least one)" 조건이 있거나, 기하학적 도형의 개수를 세는 문제, 또는 케이스를 나누어야 하는 복합적인 상황들이 포함됩니다.

## 2. 주요 전략 (Key Strategies)

### 2.1 여사건 이용 (Complementary Counting)

"적어도 하나 ~인 경우"를 구할 때 유용합니다. 직접 구하는 것보다 전체에서 반대되는 경우를 빼는 것이 훨씬 빠르고 정확할 때가 많습니다.
$$ \text{Target} = \text{Total} - \text{Opposite} $$

### 2.2 케이스 분류 (Casework)

복잡한 조건을 만족하는 경우를 서로 겹치지 않는 여러 케이스로 나누어 각각 계산한 후 더합니다.

## 3. 예제 (Examples)

### 예제 1: 적어도 한 명의 여학생 (At least one girl)

남학생 4명, 여학생 3명 중에서 3명의 대표를 뽑을 때, 적어도 1명의 여학생이 포함되는 경우의 수는?

- **전체 경우의 수:** 7명 중 3명 선택 $\binom{7}{3} = \frac{7 \times 6 \times 5}{3 \times 2 \times 1} = 35$
- **여학생이 없는 경우 (모두 남학생):** 남학생 4명 중 3명 선택 $\binom{4}{3} = 4$
- **정답:** $35 - 4 = 31$

### 예제 2: 삼각형 만들기 (Forming Triangles)

반원 위에 7개의 점이 있다. 지름 위에 4개의 점이 있고, 곡선 위에 3개의 점이 있을 때, 이 점들을 연결하여 만들 수 있는 삼각형의 개수는? (단, 지름 위의 점들은 일직선상에 있음)

- **전체 선택:** 7개 중 3개 선택 $\binom{7}{3} = 35$
- **삼각형이 안 되는 경우:** 일직선(지름) 위의 4점 중 3점을 선택하면 삼각형이 만들어지지 않음. $\binom{4}{3} = 4$
- **정답:** $35 - 4 = 31$

## 4. 코드 구현 (Code Implementation)

Python을 사용하여 여사건 전략과 기하학적 조합 문제를 검증해 봅니다.

### 4.1 여사건 검증 (Complementary Counting Check)

```python
from itertools import combinations

boys = ['B1', 'B2', 'B3', 'B4']
girls = ['G1', 'G2', 'G3']
students = boys + girls

# 전체 조합 생성
combs = list(combinations(students, 3))
total_count = len(combs)

# 적어도 한 명의 여학생이 포함된 경우 세기
valid_count = 0
for c in combs:
    # 튜플 c에 girls 리스트의 원소가 하나라도 있는지 확인
    if any(student in girls for student in c):
        valid_count += 1

print(f"전체 경우: {total_count}") # 35
print(f"조건 만족: {valid_count}") # 31
```

### 4.2 기하학적 조합 계산 (Geometric Combinations)

```python
import math

def nCr(n, r):
    return math.comb(n, r)

total_points = 7
collinear_points = 4 # 지름 위의 점

# 전체 3개 선택 - 일직선 상의 3개 선택
triangles = nCr(total_points, 3) - nCr(collinear_points, 3)

print(f"만들 수 있는 삼각형 개수: {triangles}")
# 35 - 4 = 31
```

## 5. 요약 (Summary)

- **적어도(At least):** 전체에서 반대 경우를 빼는 것이 효율적이다.
- **도형(Geometry):** 일직선 위의 점들은 삼각형을 만들 수 없으므로 전체 조합에서 제외해야 한다.
- 문제를 읽고 바로 공식을 쓰기보다, 제약 조건을 먼저 파악하여 전략(여사건 vs 케이스 분류)을 세우는 것이 중요하다.
