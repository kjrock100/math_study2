# 5.2 심화 케이스 분류 예제 (Harder Casework Examples)

## 1. 개요 (Overview)

기초적인 케이스 분류가 단일 기준(예: 첫째 자리 숫자)에 의존했다면, 심화 케이스 분류는 **두 가지 이상의 제약 조건**이 얽혀 있거나, 분류 기준을 스스로 찾아내야 하는 복잡한 문제들을 다룹니다. 이 과정에서는 **체계적인 목록 작성(Systematic Listing)**과 **대칭성(Symmetry)** 활용이 중요합니다.

## 2. 심화 전략 (Advanced Strategies)

### 2.1 다단계 분류 (Multi-Stage Classification)

한 번의 기준으로 분류가 끝나지 않을 때 사용합니다.

1.  **1차 기준:** 가장 강력한 제약 조건을 기준으로 큰 그룹을 나눕니다.
2.  **2차 기준:** 각 그룹 내부에서 세부 조건을 따져 다시 나눕니다.

### 2.2 기하학적 분류 (Geometric Classification)

도형의 개수를 셀 때 주로 사용합니다.

- **크기(Size) 기준:** 변의 길이나 넓이를 기준으로 분류 ($1\times1$, $2\times2$ 등).
- **위치(Position) 기준:** 도형의 중심이나 꼭짓점의 위치를 기준으로 분류.

## 3. 예제 (Examples)

### 예제 1: 짝수 합을 가진 3자리 수 (Even Digit Sum)

3자리 양의 정수 중 각 자릿수의 합이 **짝수**인 수의 개수는?

- **분석:** 합이 짝수가 되려면 (홀, 홀, 짝) 등의 조합을 고려해야 합니다.
- **Case 1: 세 자리가 모두 짝수 (EEE)**
  - 백의 자리: {2, 4, 6, 8} (4개, 0 불가)
  - 십, 일의 자리: {0, 2, 4, 6, 8} (각 5개)
  - $4 \times 5 \times 5 = 100$
- **Case 2: 짝수 1개, 홀수 2개**
  - **E-O-O:** $4 \times 5 \times 5 = 100$ (백의 자리 0 불가 주의)
  - **O-E-O:** $5 \times 5 \times 5 = 125$
  - **O-O-E:** $5 \times 5 \times 5 = 125$
- **Case 3: 홀수 3개 (OOO)**
  - 홀수 3개를 더하면 홀수가 되므로 **불가능**.
- **총합:** $100 + 100 + 125 + 125 = 450$

### 예제 2: 격자 속의 정사각형 (Squares in a Grid)

$4 \times 4$ 격자(Grid) 안에 있는 모든 크기의 정사각형 개수는?

- **기준:** 정사각형의 한 변의 길이($k$)
- **Case 1 ($1 \times 1$):** 가로 4칸 $\times$ 세로 4칸 = $16$개
- **Case 2 ($2 \times 2$):** 가로 3칸 $\times$ 세로 3칸 = $9$개
- **Case 3 ($3 \times 3$):** 가로 2칸 $\times$ 세로 2칸 = $4$개
- **Case 4 ($4 \times 4$):** 가로 1칸 $\times$ 세로 1칸 = $1$개
- **총합:** $16 + 9 + 4 + 1 = 30$개
- **일반화:** $n \times n$ 격자에서 정사각형의 총 개수는 $\sum_{k=1}^{n} k^2$ 입니다.

## 4. 코드 구현 (Code Implementation)

Python을 사용하여 복잡한 조건의 수를 세거나 기하학적 패턴을 검증합니다.

```python
def solve_even_digit_sum():
    count = 0
    # 100부터 999까지 순회
    for num in range(100, 1000):
        # 각 자릿수 분리
        digits = [int(d) for d in str(num)]
        # 자릿수 합이 짝수인지 확인
        if sum(digits) % 2 == 0:
            count += 1
    print(f"자릿수 합이 짝수인 3자리 수: {count}") # Expected: 450

def count_squares_in_grid(n):
    total_squares = 0
    # k는 정사각형의 한 변의 길이 (1부터 n까지)
    for k in range(1, n + 1):
        # 변의 길이가 k인 정사각형이 들어갈 수 있는 위치의 수
        # 가로로 (n - k + 1)개, 세로로 (n - k + 1)개 가능
        positions = (n - k + 1) ** 2
        total_squares += positions

    print(f"{n}x{n} 격자 안의 정사각형 개수: {total_squares}")
    # 검증: 1^2 + 2^2 + 3^2 + 4^2 = 1 + 4 + 9 + 16 = 30

solve_even_digit_sum()
count_squares_in_grid(4)
```

## 5. 요약 (Summary)

- **패리티(Parity) 활용:** 합이 짝수/홀수가 되는 조건을 (짝, 짝, 짝), (홀, 홀, 짝) 등으로 나누어 생각합니다.
- **규칙성 발견:** 도형 문제에서는 크기별로 나열하다 보면 수열의 규칙(예: 제곱수의 합)을 발견할 수 있습니다.
- **빠짐없이, 중복없이:** 심화 문제일수록 케이스가 많아지므로 표를 그리거나 체계적으로 나열하는 습관이 필수적입니다.
