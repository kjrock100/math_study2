# 5.3 실전 문제 (Practice Problems)

## 1. 개요 (Overview)

이 장에서는 케이스 분류(Casework)의 심화 응용과 더불어, 케이스가 너무 많아질 때 사용하는 **여사건(Complementary Counting)** 전략을 집중적으로 다룹니다. 또한, 격자무늬에서의 직사각형 개수 세기, 회문(Palindrome) 만들기 등 전형적인 AMC 8 문제 유형을 통해 논리적 사고력을 완성합니다.

## 2. 주요 문제 유형 및 전략 (Key Types & Strategies)

### 2.1 여사건 활용 (Complementary Counting)

직접 세기에는 케이스가 너무 많거나 복잡할 때 사용합니다.

- **전략:** $\text{Target} = \text{Total} - \text{Unwanted}$
- **적용:** "적어도 하나(At least one)", "곱이 짝수(Product is even)" 등의 조건에서 강력합니다.

### 2.2 직사각형 개수 세기 (Counting Rectangles)

$n \times m$ 격자에서 직사각형의 개수를 세는 문제입니다. 정사각형 개수 세기(5.2장)와 달리 조합(Combination)을 이용합니다.

- **원리:** 가로선 중 2개, 세로선 중 2개를 선택하면 하나의 직사각형이 결정됩니다.
- **공식:** $\binom{\text{가로선 수}}{2} \times \binom{\text{세로선 수}}{2}$

### 2.3 회문 (Palindromes)

앞으로 읽으나 뒤로 읽으나 똑같은 수나 단어를 의미합니다.

- **전략:** 대칭성을 이용합니다. 앞쪽 절반을 결정하면 뒤쪽 절반은 자동으로 결정됩니다.

## 3. 예제 (Examples)

### 예제 1: 곱이 짝수인 경우 (Product is Even)

1부터 10까지의 정수 중 서로 다른 2개를 뽑았을 때, 두 수의 곱이 짝수일 확률(또는 경우의 수)은?

- **직접 분류:** (짝, 짝), (짝, 홀), (홀, 짝) $\rightarrow$ 3가지 케이스 계산.
- **여사건 활용:**
  - 전체 경우: $\binom{10}{2} = 45$
  - 곱이 홀수인 경우 (홀, 홀): 홀수 {1, 3, 5, 7, 9} 중 2개 선택 $\rightarrow \binom{5}{2} = 10$
  - 정답: $45 - 10 = 35$

### 예제 2: 격자 속의 직사각형 (Rectangles in a Grid)

$3 \times 4$ 격자(Grid) 안에 있는 모든 직사각형의 개수는?

- **구성:** 가로선 4개($3+1$), 세로선 5개($4+1$).
- **가로선 선택:** $\binom{4}{2} = 6$
- **세로선 선택:** $\binom{5}{2} = 10$
- **총 개수:** $6 \times 10 = 60$

### 예제 3: 5자리 회문 (5-Digit Palindromes)

5자리 양의 정수 중 회문(예: 12321, 50005)의 개수는?

- **구조:** $ABCBA$ 형태.
- **A (만 단위):** 1~9 (9가지, 0 불가)
- **B (천 단위):** 0~9 (10가지)
- **C (백 단위):** 0~9 (10가지)
- **D, E (십, 일 단위):** B, A와 같아야 하므로 선택권 없음 (1가지).
- **총 개수:** $9 \times 10 \times 10 \times 1 \times 1 = 900$

## 4. 코드 구현 (Code Implementation)

Python을 사용하여 직사각형 개수 공식과 회문 개수를 검증합니다.

```python
import math

def count_rectangles_in_grid(rows, cols):
    # 가로선 개수: rows + 1, 세로선 개수: cols + 1
    horizontal_lines = rows + 1
    vertical_lines = cols + 1

    # nC2 * mC2
    h_choices = math.comb(horizontal_lines, 2)
    v_choices = math.comb(vertical_lines, 2)

    return h_choices * v_choices

def count_palindromes_brute_force(digits):
    count = 0
    start = 10**(digits-1)
    end = 10**digits

    for num in range(start, end):
        s = str(num)
        if s == s[::-1]: # 문자열 뒤집어서 비교
            count += 1
    return count

print(f"3x4 격자 직사각형 개수: {count_rectangles_in_grid(3, 4)}") # Expected: 60
print(f"5자리 회문 개수 (Brute Force): {count_palindromes_brute_force(5)}") # Expected: 900
```

## 5. 요약 (Summary)

- **여사건:** "적어도", "곱이 짝수" 등의 키워드가 보이면 전체에서 반대를 빼는 것을 먼저 고려합니다.
- **직사각형:** 선(Line)을 선택하는 조합 문제로 치환하여 풉니다 ($\binom{n}{2} \times \binom{m}{2}$).
- **회문:** 대칭성을 이용하여 절반만 결정하면 나머지는 고정된다는 점을 활용합니다.
