# 20.2 곱셈 법칙 (Product Rule)

## 1. 개요 (Overview)

합동식의 곱셈 법칙(Product Rule)은 큰 수의 곱셈이나 거듭제곱을 다룰 때, 계산 과정을 획기적으로 줄여주는 강력한 도구입니다. 특히 AMC 8에서 자주 등장하는 **일의 자리 수(Units Digit)** 찾기 문제는 이 법칙을 활용하여 해결합니다.

## 2. 공식 및 원리 (Formula & Principle)

### 2.1 곱셈 성질

두 정수 $A, B$와 법 $n$에 대하여 다음이 성립합니다.
$$ (A \times B) \pmod n \equiv ((A \pmod n) \times (B \pmod n)) \pmod n $$

즉, **"곱의 나머지"는 "나머지의 곱의 나머지"와 같습니다.**

### 2.2 거듭제곱 성질

곱셈 법칙을 반복하면 거듭제곱에도 적용됩니다.
$$ A^k \pmod n \equiv (A \pmod n)^k \pmod n $$

## 3. 주요 응용 (Key Applications)

### 3.1 일의 자리 수 찾기 (Units Digit)

어떤 수의 일의 자리 수는 그 수를 **10으로 나눈 나머지**와 같습니다.

- 문제: $N$의 일의 자리 수는? $\rightarrow$ $N \pmod{10}$을 구하라.
- 전략: 밑(Base)의 일의 자리만 떼어내어 거듭제곱의 패턴(Cycle)을 찾습니다.

### 3.2 패턴 찾기 (Finding Patterns)

거듭제곱의 나머지는 일정한 주기로 반복됩니다.

- 예: $3^n \pmod{10}$
  - $3^1 = 3$
  - $3^2 = 9$
  - $3^3 = 27 \equiv 7$
  - $3^4 = 81 \equiv 1$
  - $3^5 = 243 \equiv 3$ (반복 시작)
  - 주기(Cycle): 3, 9, 7, 1 (길이 4).

## 4. 예제 (Examples)

### 예제 1: 큰 수의 곱

$12345 \times 6789$의 일의 자리 수는?

- $12345 \equiv 5 \pmod{10}$
- $6789 \equiv 9 \pmod{10}$
- $5 \times 9 = 45 \equiv 5 \pmod{10}$.
- **정답:** 5.

### 예제 2: 거듭제곱의 일의 자리

$2^{50}$의 일의 자리 수는?

- $2$의 거듭제곱 패턴($\pmod{10}$):
  - $2, 4, 8, 16(\equiv 6), 32(\equiv 2) \dots$
  - 패턴: 2, 4, 8, 6 (주기 4).
- 지수 50을 주기로 나눔: $50 \div 4 = 12$ 나머지 $2$.
- 나머지가 2이므로 패턴의 2번째 수인 4가 정답.
- **정답:** 4.

## 5. 코드 구현 (Code Implementation)

Python을 사용하여 곱셈 법칙을 확인하고, 거듭제곱의 일의 자리 수를 구하는 함수입니다.

```python
def product_rule_demo():
    # 1. 곱셈 법칙 확인
    a = 12345
    b = 6789
    n = 10

    direct_mod = (a * b) % n
    product_rule_mod = ((a % n) * (b % n)) % n

    print(f"Direct: {direct_mod}")
    print(f"Product Rule: {product_rule_mod}") # 결과 동일

def find_units_digit_of_power(base, exponent):
    """
    base^exponent의 일의 자리 수 구하기
    """
    # 방법 1: 패턴 찾기 (교육적 목적)
    units = base % 10
    cycle = []
    curr = units
    while curr not in cycle:
        cycle.append(curr)
        curr = (curr * units) % 10

    cycle_len = len(cycle)
    if exponent == 0: return 1

    # 주기에 맞게 인덱스 계산 (1-based index adjustment)
    # 나머지 1 -> index 0, 나머지 0 -> index last
    idx = (exponent - 1) % cycle_len
    return cycle[idx]

    # 방법 2: Python 내장 함수 (실전용)
    # return pow(base, exponent, 10)

# 테스트
product_rule_demo()
print(f"Units digit of 2^50: {find_units_digit_of_power(2, 50)}") # Expected: 4
print(f"Units digit of 3^2023: {find_units_digit_of_power(3, 2023)}")
# 3 pattern: 3, 9, 7, 1. 2023 % 4 = 3 -> 3rd is 7.
```

## 6. 요약 (Summary)

- **곱셈 법칙:** $(A \times B) \% n = ((A \% n) \times (B \% n)) \% n$.
- **일의 자리:** $\pmod{10}$ 연산과 동일.
- **거듭제곱:** 밑의 일의 자리 패턴(Cycle)을 찾아 지수를 나눈다.
