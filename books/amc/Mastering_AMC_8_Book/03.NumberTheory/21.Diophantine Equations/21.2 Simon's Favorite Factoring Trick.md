# 21.2 사이먼의 인수분해 기술 (Simon's Favorite Factoring Trick)

## 1. 개요 (Overview)

"Simon's Favorite Factoring Trick" (SFFT)은 대수학, 특히 정수론 문제에서 $xy + ax + by$ 형태의 식을 인수분해하여 부정방정식을 푸는 강력한 기술입니다. 직사각형의 넓이를 구하는 모델을 통해 직관적으로 이해할 수 있습니다.

## 2. 공식 및 원리 (Formula & Principle)

### 2.1 기본 공식

$$ xy + ax + by + ab = (x + b)(y + a) $$

### 2.2 유도 과정

주어진 식 $xy + ax + by = c$가 있을 때:

1.  $x$가 있는 항을 묶습니다: $x(y + a) + by = c$.
2.  $y$ 앞의 계수 $b$를 이용하여 공통인수 $(y + a)$를 강제로 만듭니다.
3.  양변에 $ab$를 더합니다:
    $$ xy + ax + by + ab = c + ab $$
    $$ x(y + a) + b(y + a) = c + ab $$
    $$ (x + b)(y + a) = c + ab $$

## 3. 예제 (Examples)

### 예제 1: 인수분해 연습

$xy + 3x + 4y$를 인수분해하기 쉬운 형태로 변형하시오.

- $x(y + 3) + 4y$.
- $(y + 3)$을 만들기 위해 $4(y + 3)$이 필요함. 상수항 $12$가 추가됨.
- $xy + 3x + 4y + 12 = (x + 4)(y + 3)$.

### 예제 2: 부정방정식 풀기

양의 정수 $x, y$에 대하여 $xy + 5x + 2y = 20$을 만족하는 순서쌍 $(x, y)$를 모두 구하시오.

1.  SFFT 적용: 양변에 $5 \times 2 = 10$을 더합니다.
    $$ xy + 5x + 2y + 10 = 20 + 10 $$
    $$ x(y + 5) + 2(y + 5) = 30 $$
    $$ (x + 2)(y + 5) = 30 $$
2.  인수 찾기: 곱해서 30이 되는 두 수의 쌍 $(A, B)$를 찾습니다. ($A = x+2, B = y+5$)
    - $x, y \ge 1$이므로 $x+2 \ge 3, y+5 \ge 6$.
    - 가능한 $B$ ($y+5$): 6, 10, 15, 30.
    - 대응하는 $A$ ($x+2$): 5, 3, 2, 1.
3.  해 구하기:
    - $y+5=6 \implies y=1, x+2=5 \implies x=3$. $\rightarrow (3, 1)$
    - $y+5=10 \implies y=5, x+2=3 \implies x=1$. $\rightarrow (1, 5)$
    - $y+5=15 \implies y=10, x+2=2 \implies x=0$ (양의 정수 아님, 제외).
    - $y+5=30 \implies y=25, x+2=1 \implies x=-1$ (제외).
4.  **정답:** $(3, 1), (1, 5)$.

## 4. 코드 구현 (Code Implementation)

Python을 사용하여 $xy + ax + by = c$ 형태의 부정방정식 해를 찾는 함수입니다.

```python
def solve_sfft(a, b, c):
    """
    Solves xy + ax + by = c for positive integers x, y
    Transformed to: (x + b)(y + a) = c + ab
    """
    target = c + a * b
    solutions = []

    # target의 약수 찾기
    for i in range(1, int(target**0.5) + 1):
        if target % i == 0:
            factor1 = i
            factor2 = target // i

            # Case 1: x+b = factor1, y+a = factor2
            x1 = factor1 - b
            y1 = factor2 - a
            if x1 > 0 and y1 > 0:
                solutions.append((x1, y1))

            # Case 2: x+b = factor2, y+a = factor1 (if factors are different)
            if factor1 != factor2:
                x2 = factor2 - b
                y2 = factor1 - a
                if x2 > 0 and y2 > 0:
                    solutions.append((x2, y2))

    return sorted(solutions)

# 테스트: xy + 5x + 2y = 20
# a=5, b=2, c=20
print(f"Solutions for xy + 5x + 2y = 20: {solve_sfft(5, 2, 20)}")
# Expected: [(1, 5), (3, 1)] based on manual calculation
```

## 5. 요약 (Summary)

- **형태:** $xy + ax + by$.
- **비법:** 양변에 $a \times b$를 더한다.
- **결과:** $(x + b)(y + a) = \text{Constant}$.
- **활용:** 약수 관계를 이용해 정수 해를 구한다.
