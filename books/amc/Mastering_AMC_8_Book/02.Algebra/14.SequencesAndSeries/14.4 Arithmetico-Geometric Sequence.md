# 14.4 몇 급수 (Arithmetico-Geometric Sequence)

## 1. 개요 (Overview)

몇 급수(Arithmetico-Geometric Sequence)는 **등차수열**과 **등비수열**의 각 항을 곱해서 만든 수열입니다. 이름이 생소할 수 있지만, 합을 구하는 과정(공비를 곱해서 빼기)은 등비수열의 합 공식을 유도하는 과정과 매우 유사하며, 심화 대수 문제에서 종종 등장합니다.

## 2. 정의 및 일반항 (Definition & General Term)

등차수열 $\{A_n\}$ (첫째항 $a$, 공차 $d$)과 등비수열 $\{G_n\}$ (첫째항 1, 공비 $r$)의 곱으로 이루어진 수열입니다.

$$ t_n = [a + (n-1)d] r^{n-1} $$

- 예: $1, 2x, 3x^2, 4x^3, \dots$ ($a=1, d=1$인 등차수열과 공비 $x$인 등비수열의 곱)

## 3. 합 구하는 방법 (Summation Method)

몇 급수의 합 $S$를 구하는 공식보다는 **구하는 과정(Method)**을 이해하는 것이 훨씬 중요합니다.

### 3.1 과정 (Multiply and Subtract)

1.  합 $S$를 나열합니다.
    $$ S = a + (a+d)r + (a+2d)r^2 + \dots + [a+(n-1)d]r^{n-1} $$
2.  양변에 공비 $r$을 곱해서 한 칸씩 밀어 씁니다.
    $$ rS = \quad ar + (a+d)r^2 + \dots + [a+(n-2)d]r^{n-1} + [a+(n-1)d]r^n $$
3.  위 식에서 아래 식을 뺍니다 ($S - rS$).
    $$ (1-r)S = a + [dr + dr^2 + \dots + dr^{n-1}] - [a+(n-1)d]r^n $$
    - 중간 부분 $[dr + \dots]$은 공비가 $r$인 등비수열의 합이 됩니다.
4.  $(1-r)$로 나누어 $S$를 구합니다.

### 3.2 무한 몇 급수 (Infinite Arithmetico-Geometric Series)

만약 $|r| < 1$이고 항이 무한하다면, 끝항은 0으로 수렴하므로 공식이 간단해집니다.
$$ S = \frac{a}{1-r} + \frac{dr}{(1-r)^2} $$

## 4. 예제 (Examples)

### 예제 1: 유한 합

$S = 1 \cdot 1 + 2 \cdot 2 + 3 \cdot 4 + 4 \cdot 8 + 5 \cdot 16$ 의 값은?

- 등차: $1, 2, 3, 4, 5$ ($d=1$)
- 등비: $1, 2, 4, 8, 16$ ($r=2$)
- $S = 1 + 4 + 12 + 32 + 80 = 129$.
- 공식 유도법 사용:
  - $S = 1 + 2(2) + 3(4) + 4(8) + 5(16)$
  - $2S = \quad 1(2) + 2(4) + 3(8) + 4(16) + 5(32)$
  - $-S = 1 + 1(2) + 1(4) + 1(8) + 1(16) - 5(32)$
  - $-S = (1+2+4+8+16) - 160 = 31 - 160 = -129$
  - $S = 129$.

### 예제 2: 무한 합

$S = 1 + \frac{2}{2} + \frac{3}{4} + \frac{4}{8} + \dots$

- $a=1, d=1, r=1/2$.
- 공식: $S = \frac{1}{1-1/2} + \frac{1 \cdot 1/2}{(1-1/2)^2} = \frac{1}{0.5} + \frac{0.5}{0.25} = 2 + 2 = 4$.

## 5. 코드 구현 (Code Implementation)

Python을 사용하여 몇 급수의 합을 계산하는 함수입니다.

```python
def sum_ags_finite(a, d, r, n):
    """
    유한 몇 급수의 합 (Finite Arithmetico-Geometric Series)
    S = sum_{k=0}^{n-1} (a + k*d) * r^k
    """
    total = 0
    for k in range(n):
        term = (a + k * d) * (r ** k)
        total += term
    return total

def sum_ags_infinite(a, d, r):
    """
    무한 몇 급수의 합 (Infinite Arithmetico-Geometric Series)
    |r| < 1 일 때만 수렴
    """
    if abs(r) >= 1:
        return float('inf')

    term1 = a / (1 - r)
    term2 = (d * r) / ((1 - r) ** 2)
    return term1 + term2

# 테스트
# 예제 1: 1*1 + 2*2 + 3*4 + 4*8 + 5*16 (n=5, a=1, d=1, r=2)
print(f"Finite Sum: {sum_ags_finite(1, 1, 2, 5)}") # Expected: 129

# 예제 2: 1 + 2(1/2) + 3(1/4) + ... (a=1, d=1, r=0.5)
print(f"Infinite Sum: {sum_ags_infinite(1, 1, 0.5)}") # Expected: 4.0
```

## 6. 요약 (Summary)

- **구조:** (등차) $\times$ (등비).
- **해법:** $S - rS$를 계산하여 등비수열의 합으로 변환한다.
- **무한합 공식:** $\frac{a}{1-r} + \frac{dr}{(1-r)^2}$.
