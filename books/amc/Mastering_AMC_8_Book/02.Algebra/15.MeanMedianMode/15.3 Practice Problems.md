# 15.3 실전 문제 (Practice Problems)

## 1. 개요 (Overview)

이 장에서는 15.1장과 15.2장에서 다룬 평균, 중앙값, 최빈값의 개념을 통합하여 실전 문제를 해결합니다. 단순히 통계량을 계산하는 것을 넘어, 주어진 통계량을 만족하기 위해 **데이터가 어떻게 구성되어야 하는지 역추적**하거나, 특정 조건 하에서 **최댓값/최솟값을 구하는 최적화 문제**를 다룹니다.

## 2. 주요 문제 유형 (Key Problem Types)

1.  **누락된 값 찾기 (Finding Missing Values):** $n$개의 수 중 $n-1$개와 평균이 주어졌을 때 나머지 하나 구하기.
2.  **평균의 변화 (Changing Averages):** 새로운 데이터가 추가되거나 제거될 때 평균이 어떻게 변하는지 계산하기.
3.  **조건부 최적화 (Optimization with Constraints):** 평균과 중앙값이 고정된 상태에서, "서로 다른 양의 정수" 등의 조건을 만족하는 특정 원소의 최댓값 구하기.

## 3. 예제 문제 및 풀이 (Sample Problems & Solutions)

### 문제 1: 새로운 점수 추가 (New Score)

철수의 수학 시험 4번의 평균 점수는 80점이다. 5번째 시험을 본 후 전체 평균이 82점이 되려면, 5번째 시험에서 몇 점을 받아야 하는가?

- **전략:** 총합(Sum)의 변화를 봅니다.
- 4번까지의 총합: $4 \times 80 = 320$.
- 5번까지의 목표 총합: $5 \times 82 = 410$.
- **필요한 점수:** $410 - 320 = 90$점.

### 문제 2: 중앙값과 최댓값 (Median and Maximum)

서로 다른 5개의 양의 정수로 이루어진 집합의 평균이 20이고 중앙값이 18일 때, 이 집합에서 가장 큰 수는 얼마가 될 수 있는가?

- **총합:** $20 \times 5 = 100$.
- **정렬:** $x_1 < x_2 < x_3 < x_4 < x_5$.
- **중앙값:** $x_3 = 18$.
- **최적화:** $x_5$를 최대화하려면 나머지 $x_1, x_2, x_4$를 최소화해야 합니다.
  - $x_1, x_2$: 양의 정수이므로 최소는 $1, 2$.
  - $x_4$: $x_3 < x_4$이므로 최소는 $19$.
- **계산:**
  $$ 1 + 2 + 18 + 19 + x_5 = 100 $$
    $$ 40 + x_5 = 100 \implies x_5 = 60 $$
- **정답:** 60.

### 문제 3: 최빈값과 평균

5개의 정수 리스트가 있다. 최빈값은 3 하나뿐이고, 중앙값은 5, 평균은 6이다. 가장 큰 수는?

- **구성:** 최빈값이 3이므로 3은 적어도 2번 등장해야 함. 중앙값(3번째 수)이 5이므로 3은 5보다 작은 쪽에 위치.
  - 정렬 형태: $3, 3, 5, x, y$ (단, $5 < x < y$ 또는 $5 < x = y$ 등).
  - 최빈값이 3 하나뿐이려면 $x, y$는 서로 달라야 하고 3이 아니어야 함. 또한 $x, y$가 같으면 최빈값이 2개가 되므로 $x \neq y$.
- **총합:** $6 \times 5 = 30$.
- **식:** $3 + 3 + 5 + x + y = 30 \implies 11 + x + y = 30 \implies x + y = 19$.
- **최적화:** $y$를 최대화하려면 $x$를 최소화해야 함.
  - $x > 5$인 정수이므로 최소 $x = 6$.
  - $y = 19 - 6 = 13$.
  - 구성 확인: $\{3, 3, 5, 6, 13\}$. 최빈값 3(2회), 중앙값 5, 평균 6. 조건 만족.
- **정답:** 13.

## 4. 코드 구현 (Code Implementation)

Python을 사용하여 평균의 변화를 계산하고, 중앙값이 주어진 조건에서 최댓값을 찾는 함수입니다.

```python
def calculate_needed_score(current_count, current_mean, target_mean):
    """
    n개의 평균이 current_mean일 때, (n+1)번째 값이 얼마여야
    전체 평균이 target_mean이 되는지 계산
    """
    current_sum = current_count * current_mean
    target_sum = (current_count + 1) * target_mean
    return target_sum - current_sum

def solve_max_element_with_median(n, mean, median):
    """
    n개의 서로 다른 양의 정수 (n은 홀수 가정)
    평균 mean, 중앙값 median일 때 가장 큰 수의 최댓값 계산
    """
    if n % 2 == 0:
        return None # 짝수 개일 경우 로직이 더 복잡함 (중앙값이 두 수의 평균)

    total_sum = mean * n

    # 1. 중앙값보다 작은 값들 최소화 (1, 2, ...)
    # 개수: (n-1)/2 개
    num_smaller = (n - 1) // 2
    min_sum_smaller = sum(range(1, num_smaller + 1))

    # 2. 중앙값보다 큰 값들(최댓값 제외) 최소화 (median+1, median+2, ...)
    # 개수: (n-1)/2 - 1 개
    num_larger_others = num_smaller - 1
    min_sum_larger_others = sum(range(median + 1, median + 1 + num_larger_others))

    # 3. 최댓값 계산
    current_sum = min_sum_smaller + median + min_sum_larger_others
    max_val = total_sum - current_sum

    return max_val

# 테스트
print(f"문제 1 (Needed Score): {calculate_needed_score(4, 80, 82)}") # Expected: 90
print(f"문제 2 (Max Element): {solve_max_element_with_median(5, 20, 18)}") # Expected: 60
```

## 5. 요약 (Summary)

- **평균 문제:** 항상 **총합(Sum)**으로 변환하여 생각합니다. ($Sum_{new} - Sum_{old} = \text{New Value}$)
- **최적화 문제:** $A + B + C = \text{Constant}$일 때, $C$를 최대화하려면 $A, B$를 최소화해야 합니다. 이때 "서로 다른", "양의 정수" 등의 조건을 반드시 지켜야 합니다.
- **검증:** 구한 답을 포함하여 전체 데이터 집합을 만들어보고, 문제의 모든 조건(최빈값 유일성 등)을 만족하는지 확인합니다.
