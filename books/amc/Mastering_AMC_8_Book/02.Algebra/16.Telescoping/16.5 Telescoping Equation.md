# 16.5 망원 방정식 (Telescoping Equations)

## 1. 개요 (Overview)

망원 방정식(Telescoping Equation)은 망원 급수나 망원 곱의 원리를 이용하여 **미지수 $n$을 구하거나**, 점화식(Recurrence Relation)으로 정의된 수열의 **일반항**을 구하는 유형을 말합니다. "이웃한 항의 소거"라는 아이디어를 방정식 풀이에 적용하는 것입니다.

## 2. 주요 유형 (Key Types)

### 2.1 합의 형태 (Additive Form)

점화식이 차(Difference)의 형태로 주어질 때, 변변 더하여 일반항을 구합니다.
$$ a*n - a*{n-1} = f(n) \implies \sum*{k=2}^n (a_k - a*{k-1}) = a*n - a_1 = \sum*{k=2}^n f(k) $$
$$ \therefore a*n = a_1 + \sum*{k=2}^n f(k) $$

### 2.2 곱의 형태 (Multiplicative Form)

점화식이 비(Ratio)의 형태로 주어질 때, 변변 곱하여 일반항을 구합니다.
$$ \frac{a*n}{a*{n-1}} = g(n) \implies \prod*{k=2}^n \frac{a_k}{a*{k-1}} = \frac{a*n}{a_1} = \prod*{k=2}^n g(k) $$
$$ \therefore a*n = a_1 \cdot \prod*{k=2}^n g(k) $$

### 2.3 방정식의 해 구하기 (Solving for $n$)

급수의 합이 특정 값이 되도록 하는 $n$을 찾는 문제입니다.
$$ \sum*{k=1}^n (b_k - b*{k+1}) = C \implies b*1 - b*{n+1} = C $$
이 방정식을 풀어 $n$을 구합니다.

## 3. 예제 (Examples)

### 예제 1: 점화식 풀기 (합)

수열 $\{a_n\}$이 $a_1 = 1$이고 $a_n = a_{n-1} + \frac{1}{n(n-1)}$ ($n \ge 2$)일 때, $a_{10}$의 값은?

1.  변형: $a_n - a_{n-1} = \frac{1}{n(n-1)} = \frac{1}{n-1} - \frac{1}{n}$
2.  합: $\sum_{k=2}^{10} (a_k - a_{k-1}) = a_{10} - a_1 = \sum_{k=2}^{10} (\frac{1}{k-1} - \frac{1}{k})$
3.  망원 급수 계산: $(1 - \frac{1}{2}) + (\frac{1}{2} - \frac{1}{3}) + \dots + (\frac{1}{9} - \frac{1}{10}) = 1 - \frac{1}{10} = \frac{9}{10}$
4.  결과: $a_{10} = a_1 + \frac{9}{10} = 1 + 0.9 = 1.9$

### 예제 2: 점화식 풀기 (곱)

수열 $\{x_n\}$이 $x_1 = 2$이고 $x_n = x_{n-1} \cdot (1 - \frac{1}{n})$ ($n \ge 2$)일 때, $x_{50}$은?

1.  변형: $\frac{x_n}{x_{n-1}} = \frac{n-1}{n}$
2.  곱: $\frac{x_{50}}{x_1} = \prod_{k=2}^{50} \frac{k-1}{k} = \frac{1}{2} \times \frac{2}{3} \times \dots \times \frac{49}{50}$
3.  소거: $\frac{1}{50}$
4.  결과: $x_{50} = x_1 \times \frac{1}{50} = 2 \times \frac{1}{50} = \frac{1}{25}$

### 예제 3: $n$ 구하기

$\sum_{k=1}^n \frac{1}{\sqrt{k+1} + \sqrt{k}} = 9$를 만족하는 $n$은?

1.  유리화: $\frac{1}{\sqrt{k+1} + \sqrt{k}} = \sqrt{k+1} - \sqrt{k}$
2.  합: $(\sqrt{2}-\sqrt{1}) + (\sqrt{3}-\sqrt{2}) + \dots + (\sqrt{n+1}-\sqrt{n}) = \sqrt{n+1} - 1$
3.  방정식: $\sqrt{n+1} - 1 = 9 \implies \sqrt{n+1} = 10$
4.  풀이: $n+1 = 100 \implies n = 99$

## 4. 코드 구현 (Code Implementation)

Python을 사용하여 점화식의 항을 계산하고, 방정식의 해를 검증하는 함수입니다.

```python
import math

def solve_recurrence_additive(n):
    """
    a_1 = 1, a_k - a_{k-1} = 1/(k(k-1))
    Find a_n
    """
    # a_n = a_1 + sum(1/(k-1) - 1/k) from 2 to n
    # Sum part telescopes to 1 - 1/n
    a1 = 1
    sum_part = 1 - 1/n
    return a1 + sum_part

def solve_recurrence_multiplicative(n):
    """
    x_1 = 2, x_k / x_{k-1} = (k-1)/k
    Find x_n
    """
    # x_n = x_1 * product((k-1)/k) from 2 to n
    # Product part telescopes to 1/n
    x1 = 2
    prod_part = 1/n
    return x1 * prod_part

def find_n_for_radical_sum(target_sum):
    """
    Solve sum(1/(sqrt(k+1)+sqrt(k))) = target_sum for n
    Equation: sqrt(n+1) - 1 = target_sum
    """
    # sqrt(n+1) = target_sum + 1
    # n + 1 = (target_sum + 1)^2
    n = (target_sum + 1)**2 - 1
    return int(n)

# 테스트
print(f"Example 1 (a_10): {solve_recurrence_additive(10)}") # Expected: 1.9
print(f"Example 2 (x_50): {solve_recurrence_multiplicative(50)}") # Expected: 2/50 = 0.04
print(f"Example 3 (n for sum=9): {find_n_for_radical_sum(9)}") # Expected: 99
```

## 5. 요약 (Summary)

- **점화식 해결:** 차의 형태는 합으로, 비의 형태는 곱으로 변환하여 망원 성질을 이용합니다.
- **방정식 풀이:** 복잡한 급수를 간단한 식($f(n) - f(1)$)으로 줄인 후 방정식을 풉니다.
- **일반항:** $a_n = a_1 + \sum \Delta a_k$ 또는 $a_n = a_1 \cdot \prod r_k$.
