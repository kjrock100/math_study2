# 16.4 망원 곱 (Telescoping Products)

## 1. 개요 (Overview)

망원 곱(Telescoping Product)은 급수의 항들이 곱셈으로 연결되어 있을 때, 분모와 분자가 연쇄적으로 약분(Cancel)되어 간단해지는 형태를 말합니다. $\sum$ 대신 $\prod$ (Pi) 기호를 사용하며, 망원 급수(Sum)와 마찬가지로 규칙성을 찾는 것이 핵심입니다.

## 2. 기본 원리 (Basic Principle)

일반항을 $\frac{a_{k+1}}{a_k}$ 또는 $\frac{a_k}{a_{k+1}}$ 형태로 변형하면, 이웃한 항끼리 약분됩니다.

$$ \prod*{k=1}^n \frac{a*{k+1}}{a*k} = \frac{a_2}{a_1} \times \frac{a_3}{a_2} \times \dots \times \frac{a*{n+1}}{a*n} = \frac{a*{n+1}}{a_1} $$

## 3. 주요 전략 (Key Strategies)

### 3.1 통분과 인수분해 (Combine and Factor)

$1 - \frac{1}{k^2}$ 같은 형태는 통분하여 $\frac{k^2-1}{k^2}$로 만들고, 분자를 인수분해하여 $\frac{(k-1)(k+1)}{k \cdot k}$로 변형합니다.

### 3.2 항 분리 (Separation)

복잡한 식을 두 개의 간단한 분수의 곱으로 나눕니다.
$$ \frac{(k-1)(k+1)}{k^2} = \frac{k-1}{k} \times \frac{k+1}{k} $$
이렇게 하면 각각의 부분곱(Partial Product)을 따로 계산하여 곱할 수 있어 실수를 줄일 수 있습니다.

## 4. 예제 (Examples)

### 예제 1: 기본형

$$ P = \prod\_{k=1}^{n} \left(1 + \frac{1}{k}\right) $$

- 변형: $1 + \frac{1}{k} = \frac{k+1}{k}$
- 나열: $\frac{2}{1} \times \frac{3}{2} \times \frac{4}{3} \times \dots \times \frac{n+1}{n}$
- 결과: $n+1$

### 예제 2: 제곱의 차 (Square Difference)

$$ P = \prod\_{k=2}^{n} \left(1 - \frac{1}{k^2}\right) $$

- 변형: $\frac{k^2-1}{k^2} = \frac{k-1}{k} \times \frac{k+1}{k}$
- 분리 계산:
  - $A = \prod_{k=2}^n \frac{k-1}{k} = \frac{1}{2} \times \frac{2}{3} \times \dots \times \frac{n-1}{n} = \frac{1}{n}$
  - $B = \prod_{k=2}^n \frac{k+1}{k} = \frac{3}{2} \times \frac{4}{3} \times \dots \times \frac{n+1}{n} = \frac{n+1}{2}$
- 결과: $A \times B = \frac{1}{n} \times \frac{n+1}{2} = \frac{n+1}{2n}$

### 예제 3: 세제곱의 차 (Cubic Difference) - 심화

$$ P = \prod\_{k=2}^{n} \frac{k^3-1}{k^3+1} $$

- 인수분해: $\frac{(k-1)(k^2+k+1)}{(k+1)(k^2-k+1)}$
- 관찰: $k^2+k+1$에 $k-1$을 대입하면 $(k-1)^2+(k-1)+1 = k^2-2k+1+k-1+1 = k^2-k+1$이 됩니다.
  즉, $f(k) = k^2+k+1$이라 하면 분모의 항은 $f(k-1)$입니다.
- 식 변형: $\frac{k-1}{k+1} \times \frac{f(k)}{f(k-1)}$
- 분리 계산:
  - $A = \prod \frac{k-1}{k+1} = (\frac{1}{3} \times \frac{2}{4} \times \frac{3}{5} \dots) = \frac{1 \cdot 2}{n(n+1)}$ (두 칸 건너뛰기)
  - $B = \prod \frac{f(k)}{f(k-1)} = \frac{f(n)}{f(1)}$ (바로 이웃 소거)
    - $f(n) = n^2+n+1$
    - $f(1) = 1^2+1+1 = 3$
    - $B = \frac{n^2+n+1}{3}$
- 결과: $\frac{2}{n(n+1)} \times \frac{n^2+n+1}{3} = \frac{2(n^2+n+1)}{3n(n+1)}$

## 5. 코드 구현 (Code Implementation)

Python을 사용하여 다양한 망원 곱을 계산하는 함수입니다.

```python
def solve_telescoping_prod_simple(n):
    """Product of (1 + 1/k) from k=1 to n"""
    return n + 1

def solve_telescoping_prod_square(n):
    """Product of (1 - 1/k^2) from k=2 to n"""
    return (n + 1) / (2 * n)

def solve_telescoping_prod_cubic(n):
    """Product of (k^3 - 1)/(k^3 + 1) from k=2 to n"""
    numerator = 2 * (n**2 + n + 1)
    denominator = 3 * n * (n + 1)
    return numerator / denominator

# 테스트
print(f"Simple (n=10): {solve_telescoping_prod_simple(10)}") # Expected: 11
print(f"Square (n=10): {solve_telescoping_prod_square(10)}") # Expected: 11/20 = 0.55
print(f"Cubic (n=10): {solve_telescoping_prod_cubic(10):.5f}")
# Cubic Check: 2*(111) / 3*10*11 = 222 / 330 = 111 / 165 = 37 / 55 approx 0.6727
```

## 6. 요약 (Summary)

- **통분:** $1 \pm \frac{1}{k}$ 형태는 반드시 하나의 분수로 합칩니다.
- **분리:** $\frac{A \cdot B}{C \cdot D}$ 형태는 $\frac{A}{C} \times \frac{B}{D}$로 나누어 규칙을 찾습니다.
- **인수분해:** $k^2-1, k^3 \pm 1$ 등은 인수분해하여 약분되는 요소를 찾습니다.
