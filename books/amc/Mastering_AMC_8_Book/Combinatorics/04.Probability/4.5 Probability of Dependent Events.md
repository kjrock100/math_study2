# 4.5 종속 사건의 확률 (Probability of Dependent Events)

## 1. 개요 (Overview)

종속 사건(Dependent Events)은 한 사건의 결과가 다음 사건이 일어날 확률에 영향을 미치는 경우를 말합니다. 가장 대표적인 예는 **비복원 추출(Sampling Without Replacement)**로, 주머니에서 공을 꺼낸 뒤 다시 넣지 않고 다음 공을 꺼내는 상황이 이에 해당합니다.

## 2. 정의 및 공식 (Definition & Formula)

### 2.1 조건부 확률과 곱셈 법칙

사건 $A$가 일어났다는 가정하에 사건 $B$가 일어날 확률을 **조건부 확률(Conditional Probability)**이라 하며, $P(B|A)$로 표기합니다.
종속 사건 $A$와 $B$가 잇달아 일어날 확률은 다음과 같습니다.

$$ P(A \text{ and } B) = P(A) \times P(B|A) $$

- $P(A)$: 첫 번째 사건이 일어날 확률.
- $P(B|A)$: 첫 번째 사건($A$)이 일어난 상태에서 두 번째 사건($B$)이 일어날 확률.

### 2.2 독립 사건과의 비교

- **독립:** $P(B|A) = P(B)$ (앞 사건이 뒤 사건에 영향 없음) $\rightarrow P(A) \times P(B)$
- **종속:** $P(B|A) \neq P(B)$ (앞 사건에 따라 확률 변동) $\rightarrow P(A) \times P(B|A)$

## 3. 예제 (Examples)

### 예제 1: 카드 뽑기 (Drawing Cards)

52장의 카드 덱에서 카드를 한 장 뽑고, **다시 넣지 않은 채(Without Replacement)** 두 번째 카드를 뽑을 때, 두 장 모두 King(K)일 확률은?

1.  **첫 번째 K:** 전체 52장 중 K는 4장.
    $$ P(K_1) = \frac{4}{52} = \frac{1}{13} $$
2.  **두 번째 K:** 첫 번째에 K가 나갔으므로, 남은 카드는 51장, 남은 K는 3장.
    $$ P(K_2 | K_1) = \frac{3}{51} = \frac{1}{17} $$
3.  **결과:**
    $$ \frac{1}{13} \times \frac{1}{17} = \frac{1}{221} $$

### 예제 2: 구슬 뽑기 (Drawing Marbles)

주머니에 빨간 구슬 3개, 파란 구슬 2개가 있다. 비복원 추출로 2개를 연속으로 꺼낼 때, 첫 번째는 빨강, 두 번째는 파랑일 확률은?

1.  **첫 번째 빨강:** $\frac{3}{5}$
2.  **두 번째 파랑:** 남은 구슬 4개 중 파랑 2개 $\rightarrow \frac{2}{4} = \frac{1}{2}$
3.  **결과:** $\frac{3}{5} \times \frac{1}{2} = \frac{3}{10}$

## 4. 코드 구현 (Code Implementation)

Python을 사용하여 비복원 추출 상황을 시뮬레이션하고 이론값과 비교합니다.

```python
import random

def simulate_dependent_events(trials=100000):
    # 상황: 52장 카드 중 King 2장 연속 뽑기 (비복원)
    # 이론값: (4/52) * (3/51)
    theoretical_prob = (4/52) * (3/51)

    success_count = 0

    # 덱 생성: 0~51번 카드. (0, 1, 2, 3번을 King이라고 가정)
    deck_template = list(range(52))
    kings = {0, 1, 2, 3}

    for _ in range(trials):
        # 덱 복사 및 섞기
        deck = deck_template[:]
        random.shuffle(deck)

        # 비복원 추출: pop() 사용
        card1 = deck.pop()
        card2 = deck.pop()

        # 두 장 모두 King인지 확인
        if card1 in kings and card2 in kings:
            success_count += 1

    simulated_prob = success_count / trials

    print(f"이론적 확률: {theoretical_prob:.6f}")
    print(f"시뮬레이션 확률: {simulated_prob:.6f}")

simulate_dependent_events()
```

## 5. 요약 (Summary)

- **종속 사건**은 앞선 결과가 표본 공간(분모)이나 사건의 수(분자)를 변화시킨다.
- **비복원 추출**이 대표적인 예이며, $P(A) \times P(B|A)$ 공식을 사용한다.
- 계산 시, 두 번째 확률의 분모가 줄어드는 것($n \rightarrow n-1$)을 잊지 말아야 한다.
