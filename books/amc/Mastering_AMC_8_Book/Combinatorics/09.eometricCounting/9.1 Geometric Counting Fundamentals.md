# 9.1 기하학적 개수 세기 기초 (Geometric Counting Fundamentals)

## 1. 개요 (Overview)

기하학적 개수 세기(Geometric Counting)는 점, 선, 면으로 이루어진 도형에서 특정 조건을 만족하는 부분 도형의 개수를 세는 문제입니다. 조합(Combinations)과 케이스 분류(Casework)가 핵심 도구로 사용됩니다.

## 2. 점과 선분 (Points and Segments)

### 2.1 선분의 개수

일직선 위에 있지 않은 $n$개의 점 중 2개를 연결하여 만들 수 있는 선분의 개수는 다음과 같습니다.
$$ \binom{n}{2} = \frac{n(n-1)}{2} $$

### 2.2 대각선의 개수 (Diagonals)

$n$각형의 대각선 개수는 전체 선분 개수에서 변(Side)의 개수를 뺀 것입니다.
$$ \text{Diagonals} = \binom{n}{2} - n = \frac{n(n-3)}{2} $$

## 3. 삼각형 세기 (Counting Triangles)

### 3.1 기본 원리

$n$개의 점 중 3개를 선택하면 삼각형이 만들어집니다.
$$ \binom{n}{3} $$

### 3.2 예외 처리 (Collinear Points)

만약 3개 이상의 점이 일직선 위에 있다면, 그 점들로는 삼각형을 만들 수 없습니다. 따라서 전체 경우에서 일직선 위의 점들로 만드는 경우를 빼야 합니다.
$$ \text{Triangles} = \binom{n}{3} - \sum \binom{k}{3} $$
($k$: 일직선 위에 있는 점의 개수)

## 4. 격자 위의 도형 (Shapes on Grids)

### 4.1 직사각형 (Rectangles)

$m \times n$ 격자(칸 수 기준)에서 직사각형의 개수는 가로선과 세로선을 선택하는 조합으로 구합니다.

- 가로선 개수: $m+1$
- 세로선 개수: $n+1$
  $$ \text{Rectangles} = \binom{m+1}{2} \times \binom{n+1}{2} $$

### 4.2 정사각형 (Squares)

정사각형은 가로와 세로의 길이가 같아야 하므로, 크기별로 케이스를 나누어 셉니다.
$n \times n$ 격자의 경우:
$$ \sum\_{k=1}^{n} k^2 = 1^2 + 2^2 + \dots + n^2 = \frac{n(n+1)(2n+1)}{6} $$

## 5. 예제 (Examples)

### 예제 1: 칠각형의 대각선

칠각형(Heptagon, $n=7$)의 대각선 개수는?
$$ \binom{7}{2} - 7 = 21 - 7 = 14 $$

### 예제 2: 삼각형 만들기

7개의 점 중 4개가 일직선 위에 있을 때, 만들 수 있는 삼각형의 개수는?
$$ \binom{7}{3} - \binom{4}{3} = 35 - 4 = 31 $$

### 예제 3: 격자 속 직사각형

$2 \times 3$ 격자에서 직사각형의 개수는?

- 가로선: 3개 ($2+1$), 세로선: 4개 ($3+1$)
- $\binom{3}{2} \times \binom{4}{2} = 3 \times 6 = 18$

## 6. 코드 구현 (Code Implementation)

Python을 사용하여 기하학적 개수 세기 공식을 구현합니다.

```python
import math

def count_diagonals(n):
    """n각형의 대각선 개수"""
    if n < 3: return 0
    return math.comb(n, 2) - n

def count_rectangles(rows, cols):
    """rows x cols 격자에서 직사각형 개수"""
    return math.comb(rows + 1, 2) * math.comb(cols + 1, 2)

def count_squares(n):
    """n x n 격자에서 정사각형 개수"""
    return sum(k**2 for k in range(1, n + 1))

# 테스트
print(f"7각형 대각선: {count_diagonals(7)}")       # Expected: 14
print(f"2x3 격자 직사각형: {count_rectangles(2, 3)}") # Expected: 18
print(f"4x4 격자 정사각형: {count_squares(4)}")     # Expected: 30
```

## 7. 요약 (Summary)

- **선분/대각선:** $\binom{n}{2}$에서 변을 뺀다.
- **삼각형:** $\binom{n}{3}$에서 일직선상의 점들을 뺀다.
- **직사각형:** 가로선과 세로선을 각각 2개씩 뽑는다.
- **정사각형:** 크기별로 분류하여 더한다 ($\sum k^2$).
