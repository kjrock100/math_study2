# 7.2 두 사건의 포함-배제 원리 (PIE for 2 Events)

## 1. 개요 (Overview)

두 개의 집합(또는 사건)이 주어졌을 때, 포함-배제 원리(PIE)를 사용하여 합집합, 교집합, 또는 여집합의 크기를 정확하게 계산하는 방법을 다룹니다. 이는 벤 다이어그램(Venn Diagram)을 통해 시각적으로 이해하면 더욱 명확해집니다.

## 2. 핵심 공식 (Core Formulas)

### 2.1 기본 공식

$$ n(A \cup B) = n(A) + n(B) - n(A \cap B) $$

- **의미:** A와 B를 더하면 겹치는 부분(교집합)이 두 번 더해지므로, 한 번 빼주어야 전체 합집합의 크기가 됩니다.

### 2.2 전체 집합을 포함한 확장 공식

전체 집합 $U$ (Total)가 주어지고, 두 집합에 모두 속하지 않는 부분(Neither)이 있을 때:
$$ n(U) = n(A \cup B) + n(\text{Neither}) $$
$$ n(U) = n(A) + n(B) - n(A \cap B) + n(\text{Neither}) $$

## 3. 벤 다이어그램 영역 분석 (Region Analysis)

문제를 풀 때 각 영역이 무엇을 의미하는지 파악하는 것이 중요합니다.

1.  **순수 A (Only A):** $n(A) - n(A \cap B)$
2.  **순수 B (Only B):** $n(B) - n(A \cap B)$
3.  **교집합 (Both):** $n(A \cap B)$
4.  **여집합 (Neither):** $n(U) - n(A \cup B)$

## 4. 예제 (Examples)

### 예제 1: 애완동물 (Finding Neither)

학생 30명 중 강아지를 키우는 학생이 15명, 고양이를 키우는 학생이 10명, 둘 다 키우는 학생이 5명이다. 아무것도 키우지 않는 학생 수는?

1.  **합집합(적어도 한 마리):** $15 + 10 - 5 = 20$명.
2.  **여집합(아무것도 안 키움):** $30 - 20 = 10$명.

### 예제 2: 스포츠 클럽 (Finding Intersection)

회원 50명 중 축구를 좋아하는 사람은 30명, 야구를 좋아하는 사람은 25명이다. 두 종목 모두 싫어하는 사람이 5명일 때, 둘 다 좋아하는 사람의 수는?

1.  **합집합(적어도 하나 좋아함):** 전체 - 둘 다 싫어함 = $50 - 5 = 45$명.
2.  **PIE 적용:** $45 = 30 + 25 - n(\text{Both})$.
3.  **계산:** $45 = 55 - n(\text{Both}) \implies n(\text{Both}) = 10$명.

## 5. 코드 구현 (Code Implementation)

Python을 사용하여 2개 집합의 PIE 문제를 해결하는 일반화된 함수입니다.

```python
def solve_two_set_pie(total=None, nA=None, nB=None, nBoth=None, nNeither=None):
    """
    2집합 PIE 공식: Total = nA + nB - nBoth + nNeither
    알려지지 않은 값(None)을 계산하여 반환합니다.
    """
    # 주어진 값들을 딕셔너리로 관리
    params = {'total': total, 'nA': nA, 'nB': nB, 'nBoth': nBoth, 'nNeither': nNeither}

    # None인 값이 하나만 있어야 계산 가능
    unknowns = [k for k, v in params.items() if v is None]
    if len(unknowns) > 1:
        return "Error: Too many unknowns"
    if len(unknowns) == 0:
        return "All values provided"

    target = unknowns[0]

    if target == 'total':
        return nA + nB - nBoth + nNeither
    elif target == 'nNeither':
        return total - (nA + nB - nBoth)
    elif target == 'nBoth':
        return nA + nB + nNeither - total
    elif target == 'nA':
        return total - nB + nBoth - nNeither
    elif target == 'nB':
        return total - nA + nBoth - nNeither

# 예제 1: Total=30, A=15, B=10, Both=5 -> Find Neither
result1 = solve_two_set_pie(total=30, nA=15, nB=10, nBoth=5, nNeither=None)
print(f"예제 1 (Neither): {result1}") # Expected: 10

# 예제 2: Total=50, A=30, B=25, Neither=5 -> Find Both
result2 = solve_two_set_pie(total=50, nA=30, nB=25, nBoth=None, nNeither=5)
print(f"예제 2 (Both): {result2}") # Expected: 10
```

## 6. 요약 (Summary)

- **공식:** $n(U) = n(A) + n(B) - n(\text{Both}) + n(\text{Neither})$
- **접근법:** 주어진 값들을 공식에 대입하여 미지수(방정식의 $x$)를 구합니다.
- **주의:** "A만(Only A)"과 "A(집합 A 전체)"를 혼동하지 않도록 주의해야 합니다.
