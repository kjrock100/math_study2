# 1.5 원순열 (Circular Arrangements)

## 1. 개요 (Overview)

원순열(Circular Permutation)은 서로 다른 대상을 원형으로 배열하는 경우의 수를 의미합니다. 일렬로 나열하는 선형 순열(Linear Permutation)과 달리, 원순열에서는 **회전하여 일치하는 배열은 모두 같은 경우**로 간주합니다. 즉, 절대적인 위치보다는 대상들 간의 **상대적인 위치(Relative Order)**가 중요합니다.

## 2. 기본 원리 및 공식 (Basic Principles & Formula)

### 2.1 공식 유도

$n$개의 서로 다른 대상을 원형으로 배열할 때,

1.  먼저 일렬로 나열하는 경우의 수는 $n!$입니다.
2.  원형 배열에서는 시작점이 없으므로, $n$칸씩 회전시켰을 때 모양이 똑같은 경우가 $n$가지 존재합니다.
3.  따라서 전체 경우의 수를 $n$으로 나누어야 합니다.

$$ \text{Circular Permutations} = \frac{n!}{n} = (n-1)! $$

### 2.2 고정 전략 (Fixing One Item)

원순열 문제를 해결하는 가장 직관적인 방법은 **"한 명을 고정(Fixing)"**하는 것입니다.

- $n$명 중 한 명(A)을 특정 자리에 고정시킵니다. (회전하여 겹치는 것을 방지)
- 나머지 $(n-1)$명을 A를 기준으로 일렬로 나열합니다.
- 결과: $(n-1)!$

## 3. 특수 유형: 목걸이/팔찌 순열 (Reflective Symmetry)

사람이 원탁에 앉는 경우와 달리, 목걸이나 팔찌처럼 **뒤집을 수 있는(Flippable)** 경우에는 보는 방향(앞/뒤)에 따라 같은 배열이 2번 중복됩니다.

- **조건:** 회전뿐만 아니라 뒤집어서 겹치는 것도 같은 것으로 볼 때.
- **공식:**
  $$ \frac{(n-1)!}{2} $$

## 4. 예제 (Examples)

### 예제 1: 원탁에 앉기 (Round Table)

5명의 가족이 원탁에 둘러앉는 방법의 수:
$$ (5-1)! = 4! = 24 $$

### 예제 2: 목걸이 만들기 (Necklace)

서로 다른 색깔의 구슬 5개로 목걸이를 만드는 방법의 수:
$$ \frac{(5-1)!}{2} = \frac{24}{2} = 12 $$

## 5. 코드 구현 (Code Implementation)

Python을 사용하여 원순열의 개수를 계산하고, 실제로 중복을 제거하여 리스트를 생성하는 방법입니다.

### 5.1 가장 작은 원소를 기준으로 정렬 (Canonical Representation)

원순열을 생성할 때 중복을 피하는 가장 효율적인 알고리즘은 **가장 작은 원소를 맨 앞에 고정**하고 나머지를 순열로 돌리는 것입니다.

```python
from itertools import permutations

def generate_circular_permutations(items):
    if not items:
        return []

    # 1. 기준점 설정: 리스트의 첫 번째 요소(또는 가장 작은 값)를 고정
    # 원순열의 특성상 회전하면 같아지므로, 특정 원소를 12시 방향에 고정했다고 가정함.
    fixed_item = items[0]
    remaining_items = items[1:]

    # 2. 나머지 원소들로 순열 생성 (n-1)!
    linear_perms = permutations(remaining_items)

    circular_perms = []
    for p in linear_perms:
        # 고정된 원소를 앞에 붙여서 하나의 완성된 원순열 형태를 만듦
        circular_perms.append((fixed_item,) + p)

    return circular_perms

items = ['A', 'B', 'C', 'D']
result = generate_circular_permutations(items)

print(f"원소: {items}")
print(f"원순열 개수 (4-1)!: {len(result)}") # 출력: 6
for p in result:
    print(p)
# 출력 예시: ('A', 'B', 'C', 'D'), ('A', 'B', 'D', 'C'), ...
```

## 6. 요약 (Summary)

- **기본 원순열:** 회전하여 겹치면 같다. $\rightarrow (n-1)!$
- **접근법:** $n$으로 나누거나, 한 명을 고정하고 나머지를 줄 세운다.
- **뒤집기 가능(목걸이):** 뒤집어서 겹치면 같다. $\rightarrow \frac{(n-1)!}{2}$
- 코드로 구현할 때는 첫 번째 요소를 고정(`items[0]`)하고 나머지(`items[1:]`)의 순열을 구하면 중복 없이 정확히 $(n-1)!$개를 얻을 수 있다.
